{% load static %}
{% block content %}
<!-- Reservation & Booking Form -->
<section class="testimonials">
    <div class="background bg-img bg-fixed section-padding pb-0"
         style=""
         data-background="{% static 'img/slider/4.png' %}"
         data-overlay-dark="0">
        <div class="container">
            <div class="row">
                <!-- Reservation -->
                <!--                <div class="col-md-5 mb-30 mt-30">-->
                <div class="col-md-6">

                    <div class="booking-box">
                        <div class="head-box">
                            <h6>Check Price</h6>
                            <h4>Predict Price </h4>
                            {% if predicted_price %}
                            <div class="result" id="result">
                                <h3 style="color:black;">Predicted Price: â‚¬ {{ predicted_price }}</h3>
                                <!--        <h5 style="color:black;">Booking Confirmation</h5>-->
<!--                                <p style="color:black;">Your booking has been confirmed, and the price has been set at $-->
<!--                                    {{ booking.price }}.</p>-->

                            </div>
                            {% endif %}
                        </div>
                        <div class="booking-inner clearfix">

                            <form id="priceForm" method="POST">
                                {% csrf_token %}
                                <div class="row">
                                    <div class="col-md-6">
                                        <label>Trip Type</label>
                                        <select class="select2 select" name="trip_type" id="trip_type"
                                                style="width: 100%">
                                            <option value="" disabled selected>Type of Journey</option>
                                            <option value="1">OneWay</option>
                                            <option value="2">Round Trip</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label>Pickup Location</label>
                                        <select class="select2 select" name="pickup_location" style="width: 100%">
                                            <option value="" disabled selected>Select Pickup Location</option>
                                            <option value="0">BEAUVAIS</option>
                                            <option value="1">Bayeux</option>
                                            <option value="2">CDG(Charles de Gaulle Airport)</option>
                                            <option value="3">Fontainebleau</option>
                                            <option value="4">ORLY (Orly Airport)</option>
                                            <option value="5">Paris hotels / Train Stations</option>
                                            <option value="6">Reims</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label>Drop Off Location</label>
                                        <select class="select2 select" name="dropoff_location" style="width: 100%">
                                            <option value="" disabled selected>Select Drop Off</option>
                                            <option value="0">BEAUVAIS</option>
                                            <option value="1">CDG</option>
                                            <option value="2">Disneyland</option>
                                            <option value="3">ORLY (Orly Airport)</option>
                                            <option value="4">Paris hotels / Train Stations</option>
                                            <!--                     <option value="6">Reims</option>-->
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label>Transport Type</label>
                                        <select class="select2 select" name="transport_type" style="width: 100%">
                                            <option value="" disabled selected>Select Transport Type</option>
                                            <option value="0">Car</option>
                                            <option value="1">Van</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label>Adults</label>
                                        <select class="select2 select" name="adults" style="width: 100%">
                                            <option value="" disabled selected>Number of Adults</option>
                                            <option value="1">1</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                            <option value="4">4</option>
                                            <option value="5">5</option>
                                            <option value="6">6</option>
                                            <option value="7">7</option>
                                            <option value="8">8</option>
                                            <option value="9">9</option>
                                            <option value="10">10</option>

                                        </select>
                                        <!--                <input type="number" class="select2 select form-control" name="adults" placeholder="Adults" max="8" required>-->

                                    </div>
                                    <div class="col-md-6">
                                        <label>Children</label>
                                        <!--                <input type="number" class="select2 select form-control" name="children" placeholder="Children" max="8" required>-->

                                        <select class="select2 select" name="children" style="width: 100%">
                                            <option value="" disabled selected>Number of Children</option>
                                            <option value="1">1</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                            <option value="4">4</option>
                                            <option value="5">5</option>
                                            <option value="6">6</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label>Pickup Time</label>
                                        <select class="select2 select" name="pickup_time" id="pickup_time" required
                                                style="width: 100%">
                                            <option value="" disabled selected>Pickup Time</option>
                                            <option value="0">10 PM - 6 AM</option>
                                            <option value="1">6 AM - 10 PM</option>
                                        </select>
                                        <!--                <input type="number" name="pickup_time" id="pickup_time" required><br><br>-->
                                    </div>
                                    <div class="col-md-6" id="return_time_container">
                                        <label>Return Time</label>
                                        <select class="select2 select" name="return_time" id="return_time" required
                                                style="width: 100%">
                                            <option value="" disabled selected>Pickup Time</option>
                                            <option value="0">10 PM - 6 AM</option>
                                            <option value="1">6 AM - 10 PM</option>
                                        </select>
                                        <!--                <input type="number" name="return_time" id="return_time"><br><br>-->
                                    </div>

                                    <div class="col-md-12 text-right">
                                        <button type="submit" class="btn-form1-submit">Predict Price</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- Booking Form -->
                <div class="col-md-6">
                    <div class="booking-box">
                                <h5 style="color:black;">Booking Confirmation</h5>
                        <a href="{% url 'booking' %}" class="btn-form1-submit"><span class="text-right">Book Now</span></a>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
    .link {
  display: inline-block;
  text-decoration: none;
  padding: 12px 24px;
  background: linear-gradient(135deg, #6a11cb, #2575fc);
  color: #fff;
  font-weight: bold;
  border-radius: 50px;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
}

.link span {
  display: inline-block;
  transition: transform 0.3s ease;
}

.link:hover {
  transform: translateY(-3px);
  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
}

.link:hover span {
  transform: scale(1.05);
}

</style>

<style>
    .background {
  /* Always cover + center the image */
  background-size: cover;
  background-position: center center;
  /* Fallback gradient preserved by inline style */
}

.bg-img {
  /* Pull in your data-background URL via JS or inline style */
  background-image: url("{% static 'img/slider/2.png' %}");
}

.bg-fixed {
  background-attachment: fixed;
}

/* MOBILE OVERRIDES */
@media (max-width: 768px) {
  .bg-fixed {
    /* Disable fixed on smaller viewports for performance & consistency */
    background-attachment: scroll;
  }

  .section-padding {
    /* Tighter vertical padding so the block isnâ€™t too tall */
    padding-top: 2rem;    /* ~32px */
    padding-bottom: 2rem; /* ~32px */
  }

  .pb-0 {
    /* If you need to re-enable bottom padding on mobile, override here */
    padding-bottom: 2rem; /* or 0 if you really want no bottom padding */
  }
}

</style>
<!-- Include necessary scripts -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        var currentStep = 0;
        var steps = $(".form-step");
        function showStep(index) {
            steps.hide();
            $(steps[index]).show();
        }

        $(".next-btn").click(function() {
            if (currentStep < steps.length - 1) {
                currentStep++;
                showStep(currentStep);
            }
        });

        $(".prev-btn").click(function() {
            if (currentStep > 0) {
                currentStep--;
                showStep(currentStep);
            }
        });

        // Initialize the form by showing the first step
        showStep(currentStep);
    });


</script>

<script>
        $(document).ready(function() {
            $('#return_time_container').hide(); // Hide return time field initially

            $('#trip_type').change(function() {
                var tripType = $(this).val();
                if (tripType == '2') { // Show return time field for round trip
                    $('#return_time_container').show();
                    $('#return_time').prop('required', true);
                } else { // Hide return time field for other trip types
                    $('#return_time_container').hide();
                    $('#return_time').prop('required', false);
                    $('#return_time').val(0); // Set return time to 0 if hidden
                }
            });

            $('#priceForm').on('submit', function(event) {
                if ($('#trip_type').val() != '2') {z
                    $('#return_time').val(0); // Set return time to 0 if not round trip
                }
            });
        });




</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        // Initially hide return time and checkout date
        $('#booking_return_time_container').hide();
        $('#checkout_date_container').hide();

        // Handle trip type changes
        $('select[name="trip_type"]').on('change', function () {
            const tripType = $(this).val();

            if (tripType === '1') {
                // Round Trip selected
                $('#booking_return_time_container').show();
                $('#checkout_date_container').show();
                $('#booking_return_time').prop('required', true);
                $('#checkout_date').prop('required', true);
            } else {
                // OneWay selected
                $('#booking_return_time_container').hide();
                $('#checkout_date_container').hide();
                $('#booking_return_time').prop('required', false).val('');
                $('#checkout_date').prop('required', false).val('');
            }
        });

        // Trigger change on page load to apply logic if pre-filled
        $('select[name="trip_type"]').trigger('change');
    });


</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const result = document.getElementById("result");
        if (result) {
            result.scrollIntoView({ behavior: "smooth", block: "center" });
        }
    });
</script>


{% endblock %}


